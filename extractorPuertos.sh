#!/bin/bash

ports="$(cat $1 | grep -oP '\d{1,5}/open' | awk '{print $1}' FS='/' | xargs | tr ' ' ',')"
ip_address="$(cat $1 | grep -oP '^Host: .*\(\)' | head -n 1 | awk '{print $2}')"

echo -e "\n[*] Extrayendo informacion....\n" > extractPorts.tmp
echo -e "\t[*] Dirreccion IP: $ip_address" >> extractPorts.tmp
echo -e "\t[*] Puertos Abiertos: $ports\n " >> extractPorts.tmp
echo $ports | tr -d '\n' | xclip -sel clip
echo -e "[*] puetos copiados en tu portapapeles\n ">> extractPorts.tmp
cat extractPorts.tmp
rm extractPorts.tmp


# al pasarle un allports este te da todos los puertos que se encontraron en un formato mas legible y la direccion y todo
